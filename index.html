<html>

<head>
  <title>DBD</title>
</head>
<style>
  * {
    margin: 0;
    padding: 0;
    outline: 0;
  }

  html,
  body {
    width: 100%;
  }

  .vcenter {
    position: absolute;
    margin: 0;
    top: 50%;
    transform: translateY(-50%);
  }

  #canvasWrap {
    position: relative;
    width: 500px;
  }

  #overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 500px;
    height: 150px;
  }

  .pr {
    position: relative;
  }

  #wrapDetail {
    background-color: rgba(0, 0, 0, 0.3)
  }
</style>

<body>
  <div id="canvasWrap">
    <canvas id="canvasBackground" width="500" height="150"></canvas>
    <div id="overlay">
      <div class="vcenter">
        <div class="pr" style="font-family: Roboto; left: 10%; font-size: 36px; color: white">Corrupt Intervention</div>
        <div class="pr" style="left: 10%; font-size: 18px; color: white">稀少 - 瘟疫 - 技能</div>
      </div>
    </div>
    <div id="wrapDetail" style="height: 150px;">
    </div>
  </div>
</body>
<script type="text/javascript">
  var particles = [];
  var particleCount = 30;
  var targetFPS = 33;
  var canvasId = "canvasBackground";
  var actualCanvasWidth = document.getElementById(canvasId).width;
  var canvasWidth = actualCanvasWidth - 100;
  var canvasHeight = document.getElementById(canvasId).height;
  var imageObj = new Image();
  imageObj.onload = function () {
    particles.forEach(function (particle) {
      particle.image = imageObj;
    });
  };
  imageObj.src = "http://www.blog.jonnycornwell.com/wp-content/uploads/2012/07/Smoke10.png";

  function Particle(context) {
    this.x = generateRandom(0, canvasWidth);
    this.y = generateRandom(0, canvasHeight);
    this.xVelocity = generateRandom(0, 3);
    this.rotationSpeed = generateRandom(-Math.PI, Math.PI) / targetFPS / 5;
    this.rotation = 0;
    this.rightBorder = generateRandom(canvasWidth / 2, canvasWidth);
    this.context = context;
    this.draw = function () {
      if (this.image) {
        this.context.translate(this.x, this.y);
        this.context.rotate(this.rotation);
        this.context.globalCompositeOperation = "source-over";
        this.context.globalAlpha = 1 - ((this.x + 128) / (this.rightBorder + 228));
        this.context.drawImage(this.image, -128, -128);
        this.context.globalAlpha = 1;
        this.context.rotate(-this.rotation);
        this.context.translate(-this.x, -this.y);
      }
    };
    this.update = function () {
      this.rotation += this.rotationSpeed;
      this.x += this.xVelocity;
      if (this.x - 100 >= this.rightBorder) {
        this.x = -128;
      }
    };
  }

  function generateRandom(min, max) {
    return Math.random() * (max - min) + min;
  }
  var context;
  var canvas = document.getElementById(canvasId);
  if (canvas.getContext) {
    context = canvas.getContext('2d');
    for (var i = 0; i < particleCount; ++i) {
      particles.push(new Particle(context));
    }
  } else {
    alert("Please use a modern browser");
  }
  if (context) {
    setInterval(function () {
      particles.forEach(function (particle) {
        particle.update();
      });
      context.globalCompositeOperation = "source-over";
      context.fillStyle = "rgba(0, 0, 0, 0.5)";
      context.fillRect(0, 0, actualCanvasWidth, canvasHeight);
      particles.forEach(function (particle) {
        particle.draw();
      });
      context.globalCompositeOperation = "color";
      context.fillStyle = "rgba(90,40,110,1)"; // "hsl(280,65%, 40%)";
      context.fillRect(0, 0, actualCanvasWidth, canvasHeight);
    }, 1000 / targetFPS);
  }

</script>
<script>
  var canvasItem = document.getElementById("canvasWrap");
  document.addEventListener("mousemove", (e) => {
    if (e.clientX + canvasItem.clientWidth > document.documentElement.clientWidth) {
      canvasItem.style.left = e.clientX - canvasItem.clientWidth;
    } else {
      canvasItem.style.left = e.clientX;
    }
    if (e.clientY + canvasItem.clientHeight > window.innerHeight) {
      canvasItem.style.top = e.clientY - canvasItem.clientHeight;
    } else {
      canvasItem.style.top = e.clientY;
    }
  });
</script>

</html>